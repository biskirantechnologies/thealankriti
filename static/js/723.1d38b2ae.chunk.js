"use strict";(self.webpackChunkTheAlankriti_jewells_frontend=self.webpackChunkTheAlankriti_jewells_frontend||[]).push([[723],{6723:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var a=t(2555),r=t(5043),l=t(6305),d=t(9531),i=t(7449),n=t(579);const c=()=>{var e,s,t,c,o,x;const[m,h]=(0,r.useState)([]),[p,u]=(0,r.useState)(!0),[g,v]=(0,r.useState)(""),[j,y]=(0,r.useState)("all"),[f,N]=(0,r.useState)(1),[b,w]=(0,r.useState)(1),[k,A]=(0,r.useState)(null),[S,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{P()},[f,j,g]);const P=async()=>{try{u(!0);const e={page:f,limit:10,search:g,status:"all"!==j?j:void 0},s=await l.Er.getOrders(e);h(s.data.orders||[]),w(s.data.totalPages||1)}catch(e){console.error("Failed to fetch orders:",e),h([])}finally{u(!1)}},L=e=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",processing:"bg-purple-100 text-purple-800",shipped:"bg-indigo-100 text-indigo-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800");return p?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gold"})}):(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("div",{className:"bg-white shadow",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsx)("div",{className:"py-6",children:(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Order Management"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Manage all customer orders and their status"})]})})})})}),(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,n.jsx)("div",{className:"bg-white rounded-lg shadow mb-6",children:(0,n.jsx)("div",{className:"p-6",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(i.A,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),(0,n.jsx)("input",{type:"text",placeholder:"Search orders by customer name, email, or order ID...",value:g,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-gold focus:border-gold"})]})}),(0,n.jsx)("div",{className:"sm:w-48",children:(0,n.jsx)("select",{value:j,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-gold focus:border-gold",children:[{value:"all",label:"All Orders"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"processing",label:"Processing"},{value:"shipped",label:"Shipped"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}].map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))})})]})})}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.length>0?m.map(e=>{var s,t,r,i,c;return(0,n.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["#",e.orderNumber||e._id.slice(-6)]}),(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:[(null===(s=e.items)||void 0===s?void 0:s.length)||0," items"]})]})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(r=e.user)||void 0===r?void 0:r.lastName]}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:null===(i=e.user)||void 0===i?void 0:i.email})]})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.createdAt).toLocaleDateString()}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["\u20b9",(null===(c=e.totalAmount)||void 0===c?void 0:c.toLocaleString())||0]}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsxs)("select",{value:e.status,onChange:s=>(async(e,s)=>{try{await l.Er.updateOrderStatus(e,{status:s}),P(),(null===k||void 0===k?void 0:k._id)===e&&A((0,a.A)((0,a.A)({},k),{},{status:s}))}catch(t){console.error("Failed to update order status:",t)}})(e._id,s.target.value),className:"text-sm rounded-full px-3 py-1 font-medium border-none ".concat(L(e.status)),children:[(0,n.jsx)("option",{value:"pending",children:"Pending"}),(0,n.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,n.jsx)("option",{value:"processing",children:"Processing"}),(0,n.jsx)("option",{value:"shipped",children:"Shipped"}),(0,n.jsx)("option",{value:"delivered",children:"Delivered"}),(0,n.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,n.jsx)("button",{onClick:()=>(async e=>{try{const s=await l.Er.getOrder(e);A(s.data),C(!0)}catch(s){console.error("Failed to fetch order details:",s)}})(e._id),className:"text-gold hover:text-gold-dark mr-3",children:(0,n.jsx)(d.A,{className:"h-5 w-5"})})})]},e._id)}):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No orders found"})})})]})}),b>1&&(0,n.jsx)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,n.jsx)("button",{onClick:()=>N(e=>Math.max(e-1,1)),disabled:1===f,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,n.jsx)("button",{onClick:()=>N(e=>Math.min(e+1,b)),disabled:f===b,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,n.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("p",{className:"text-sm text-gray-700",children:["Page ",(0,n.jsx)("span",{className:"font-medium",children:f})," of"," ",(0,n.jsx)("span",{className:"font-medium",children:b})]})}),(0,n.jsx)("div",{children:(0,n.jsx)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:Array.from({length:b},(e,s)=>s+1).map(e=>(0,n.jsx)("button",{onClick:()=>N(e),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(e===f?"z-10 bg-gold border-gold text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:e},e))})})]})]})})]})]}),S&&k&&(0,n.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,n.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Order #",k.orderNumber||k._id.slice(-6)]}),(0,n.jsxs)("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:[(0,n.jsx)("span",{className:"sr-only",children:"Close"}),"\u2715"]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Customer Information"}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,n.jsx)("strong",{children:"Name:"})," ",null===(e=k.user)||void 0===e?void 0:e.firstName," ",null===(s=k.user)||void 0===s?void 0:s.lastName]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,n.jsx)("strong",{children:"Email:"})," ",null===(t=k.user)||void 0===t?void 0:t.email]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,n.jsx)("strong",{children:"Phone:"})," ",(null===(c=k.user)||void 0===c?void 0:c.phone)||"N/A"]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Order Information"}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,n.jsx)("strong",{children:"Date:"})," ",new Date(k.createdAt).toLocaleDateString()]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,n.jsx)("strong",{children:"Status:"}),(0,n.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(L(k.status)),children:k.status})]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,n.jsx)("strong",{children:"Total:"})," \u20b9",(null===(o=k.totalAmount)||void 0===o?void 0:o.toLocaleString())||0]})]})]}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Order Items"}),(0,n.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Price"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),(0,n.jsx)("tbody",{className:"divide-y divide-gray-200",children:null===(x=k.items)||void 0===x?void 0:x.map((e,s)=>{var t,a,r,l,d;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("img",{className:"h-10 w-10 rounded-md object-cover",src:(null===(t=e.product)||void 0===t||null===(a=t.images)||void 0===a?void 0:a[0])||"/api/placeholder/40/40",alt:(null===(r=e.product)||void 0===r?void 0:r.name)||"Product"}),(0,n.jsx)("div",{className:"ml-4",children:(0,n.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===(l=e.product)||void 0===l?void 0:l.name)||"Unknown Product"})})]})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.quantity}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",(null===(d=e.price)||void 0===d?void 0:d.toLocaleString())||0]}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["\u20b9",((e.price||0)*(e.quantity||0)).toLocaleString()]})]},s)})})]})})]}),k.shippingAddress&&(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Shipping Address"}),(0,n.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:[k.shippingAddress.street,(0,n.jsx)("br",{}),k.shippingAddress.city,", ",k.shippingAddress.state," ",k.shippingAddress.zipCode,(0,n.jsx)("br",{}),k.shippingAddress.country]})})]})]})})})]})}},9531:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(3986),r=t(5043);const l=["title","titleId"];function d(e,s){let{title:t,titleId:d}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":d},i),t?r.createElement("title",{id:d},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const i=r.forwardRef(d)}}]);
//# sourceMappingURL=723.1d38b2ae.chunk.js.map